---
title: "gapminder-wrangle"
author: "lkm"
date: "March 13, 2018"
output: html_document
editor_options: 
  chunk_output_type: console
---
# Libraries
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(skimr) #more detailed info to skim dataset
```

# Input data
```{r data}

gapminder <- read_csv("https://raw.githubusercontent.com/jules32/2017-11-30-MBARI/gh-pages/data/gapminder.csv")

##quick functions to look at structure of data set:

head(gapminder, 2) #add a number to specify number of rows want to see
tail(gapminder, 3) 

str(gapminder)

dim(gapminder)
ncol(gapminder)
nrow(gapminder)

summary(gapminder)

skim(gapminder)
```


# Using dplyr::filter
```{r filter, echo= TRUE}

dplyr::filter(gapminder, country=="Switzerland")

dplyr::filter(gapminder, lifeExp < 30)

dplyr::filter(gapminder, min(lifeExp) & year > 2005)

```

# Using dplyr:: select
```{r select, echo=TRUE}

dplyr::select(gapminder, -continent) #selects all data in gapminder, but drops the continent column

##make df with no continent column and only year 2007

dplyr::select(gapminder, -continent) %>%
  filter(year == 2007)

```

# Using dplyr::mutate
```{r mutate, echo=TRUE}

gapminder %>% 
  mutate(gdp = gdpPercap * pop) %>% #making a new col with gdp, not normalized by per capita
  arrange(desc(gdp)) #this will arrange output by gdp values, descening from highest to lowest


```


# Using dplyr::group_by(), to create subsets of dataframe
```{r groups, echp=TRUE}

gapminder %>% 
  group_by(country) %>%
  mutate(gdp = gdpPercap * pop, max_gdp=max(gdp)) %>%
  ungroup() #good practice to ungroup after doing the manipulation

```

